### -- GLOBAL SSH CONFIG --
{{- if eq .osid "darwin" }}
Include ~/.orbstack/ssh/config
{{- end }}

Host *
  AddKeysToAgent yes           # Automatically add keys to the SSH agent
  ServerAliveInterval 120      # Send keepalive every 120 seconds
  ServerAliveCountMax 30       # Allow 30 missed keepalives before disconnect
  SetEnv TERM=xterm-256color   # Set terminal type for remote sessions
  SendEnv LANG LC_*            # Forward locale settings to remote hosts

### GitHub

Host github.com gist.github.com
  Port 22
  User {{ .github_username }}
  PreferredAuthentications publickey

### -- HOMELAB --

Host homelab
  HostName 100.89.16.71
  User justin
{{- if and (eq .osid "darwin") (.personal) }}
  ForwardAgent yes
{{ end }}

Host nas
  HostName 100.77.69.85
  User justinwme
  Port 42847
{{- if and (eq .osid "darwin") (.personal) }}
  ForwardAgent yes
{{ end }}

Host m1server
  HostName 100.100.224.127
  User justinwilliams
  Port 22
{{- if and (eq .osid "darwin") (.personal) }}
  ForwardAgent yes
{{ end }}

Host udm
  HostName 100.107.130.20
  User root

{{ if .personal }}
### Personal Machines

Host mbp
  HostName 100.103.99.109
  Port 22
  User justinwilliams
  ForwardAgent yes

Host studio
  HostName 100.88.193.73
  Port 22
  User justinwilliams
  ForwardAgent yes

Match host * exec "test -z $SSH_TTY"
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
{{ end -}}
